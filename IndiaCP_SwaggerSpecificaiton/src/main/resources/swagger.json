{
    "swagger": "2.0",
    "info": {
        "title": "IndiaCP API",
        "description": "This API will drive the UI",
        "version": "1.0.0"
    },
    "host": "finwizui.azurewebsites.net",
    "schemes": [
        "http"
    ],
    "basePath": "/api",
    "produces": [
        "application/json"
    ],
    "paths": {
        "/indiacpprogram/issueCPProgram": {
            "post": {
                "summary": "Issue new CP Program",
                "description": "This creates a new CP Program with the details provided",
                "operationId": "issueCPProgram",
                "consumes": [ "application/json"],
                "parameters": [
                    {
                        "name": "cpprogram_details",
                        "in": "body",
                        "description": "Details of the CP Program to be Issued",
                        "required": true,
                        "schema":
                        {
                          "$ref" : "#/definitions/IndiaCPProgram"
                        }
                    }
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "Creates a new CP Program",
                        "schema": {
                            "$ref": "#/definitions/IndiaCPProgram"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/indiacpprogram/fetchAllCPProgram": {
            "get": {
                "summary": "Fetch All CPPrograms for the current Issuer. The current Issuer is assumed from the DL Node that this request is forwarded to.",
                "description": "Returns all the CP Programs for the current issuer\n",
                "operationId": "fetchAllCPProgram",
                "parameters": [
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "An array of CP Programs",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/IndiaCPProgram"
                            }
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/indiacpprogram/fetchCPProgram/{cpProgramId}": {
            "get": {
                "summary": "Get CP Program details by Id. The current Issuer is assumed from the DL Node that this request is forwarded to.",
                "description": "This returns a single CP Program identified by an Id provided by the call\n",
                "operationId": "fetchCPProgram",
                "parameters": [
                    {
                        "name": "cpProgramId",
                        "in": "path",
                        "description": "CP Program ID that uniquely identifies the CP Program issued by the Issuer",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "Returns a CP Program",
                        "schema": {
                            "$ref": "#/definitions/IndiaCPProgram"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/indiacpprogram/addDoc": {
            "post": {
                "summary": "Uploads and attaches the provided document to the CPProgram on the DL",
                "description": "Uploads and attaches the provided document to the CPProgram on the DL",
                "operationId": "addDoc",
                "produces": [
                    "application/json"
                ],
                "consumes": [
                  "multipart/form-data"
                ],
                "parameters": [
                    {
                        "name": "metadata",
                        "in": "formData",
                        "description": "Document Attachment Details",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "file",
                        "in": "formData",
                        "description": "Document Attachment",
                        "required": true,
                        "type": "file"
                    }
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "Returns a CP Program",
                        "schema": {
                            "$ref": "#/definitions/IndiaCPProgram"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/indiacpprogram/addISIN/{cpProgramId}/{isin}": {
            "post": {
                "summary": "Adds the ISIN to the India CP Program",
                "description": "Adds the ISIN to the India CP Program",
                "operationId": "addISIN",
                "parameters": [
                    {
                        "name": "cpProgramId",
                        "in": "path",
                        "description": "CP Program ID that uniquely identifies the CP Program issued by the Issuer",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "isin",
                        "in": "path",
                        "description": "ISIN generated by NSDL",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "Returns a CP Program",
                        "schema": {
                            "$ref": "#/definitions/IndiaCPProgram"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/cpissues/{issuer}/{cpProgramId}": {
            "get": {
                "summary": "Get CP Issues allotted under a given CP Program",
                "description": "This returns all the CP Issues under the umbrella CP Program identified by an Id provided by the call\n",
                "operationId": "fetchAllCPForCPProgram",
                "parameters": [
                    {
                        "name": "issuer",
                        "in": "path",
                        "description": "issuer id that uniquely maps to the issuer DL node",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "cpProgramId",
                        "in": "path",
                        "description": "CP Program ID that uniquely identifies the CP Program issued by the Issuer",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Issuer"
                ],
                "responses": {
                    "200": {
                        "description": "Returns all CP Issues under the umbrella CP Program",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/IndiaCPIssue"
                            }
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/cpissues/open/{entity}": {
            "get": {
                "summary": "Get All Open CP Issues for the given Issuer/Investor. Open CP Issues refers to the Issues that are yet to mature",
                "description": "This returns all the CP Issues under the umbrella CP Program identified by an Id provided by the call\n",
                "operationId": "fetchAllCP",
                "parameters": [
                    {
                        "name": "entity",
                        "in": "path",
                        "description": "issuer or investor id that uniquely maps to the DL node",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Issuer", "Investor"
                ],
                "responses": {
                    "200": {
                        "description": "Get All Open CP Issues for the given Issuer/Investor. Open CP Issues refers to the Issues that are yet to mature",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/IndiaCPIssue"
                            }
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/cpissue/{entity}/{cpIssueId}": {
            "get": {
                "summary": "Get All Open CP Issues for the given Issuer/Investor. Open CP Issues refers to the Issues that are yet to mature",
                "description": "This returns all the CP Issues under the umbrella CP Program identified by an Id provided by the call\n",
                "operationId": "fetchCP",
                "parameters": [
                    {
                        "name": "entity",
                        "in": "path",
                        "description": "issuer or investor id that uniquely maps to the DL node",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "cpIssueId",
                        "in": "path",
                        "description": "Unique identifier of the CP Issue to be fetched",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "Issuer", "Investor"
                ],
                "responses": {
                    "200": {
                        "description": "Get All Open CP Issues for the given Issuer/Investor. Open CP Issues refers to the Issues that are yet to mature",
                        "schema": {
                                "$ref": "#/definitions/IndiaCPIssue"
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        },
        "/transactionhistory/{issuer}/{cpProgramId}": {
            "get": {
                "summary": "Complete audit log of all changes/versions of given CP Program",
                "description": "A given CP Program once initiated undergoes various changes as it progresses through the trade lifecycle of generating ISIN, generating Deal Confirmations with each identified Investor, getting IPA Verification till the final settlement of all Deals and followed by redemption of the CP at the Maturity Date. This API will return this complete log history.",
                "parameters": [
                    {
                        "name": "issuer",
                        "in": "path",
                        "description": "issuer id that uniquely maps to the DL node",
                        "required": true,
                        "type": "string"
                    },
                    {
                        "name": "cpProgramId",
                        "in": "path",
                        "description": "CP Program ID that uniquely identifies the CP Program issued by the Issuer",
                        "required": true,
                        "type": "string"
                    }
                ],
                "tags": [
                    "User"
                ],
                "responses": {
                    "200": {
                        "description": "An array of all versions of the given CP Program",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/IndiaCPProgram"
                            }
                        }
                    },
                    "default": {
                        "description": "Unexpected error",
                        "schema": {
                            "$ref": "#/definitions/Error"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "LegalEntityCreditRatingDocument": {
            "type": "object",
            "properties": {
                "legal_entity_id": {
                    "type": "string",
                    "description": "Unique identifier of the Legal Entity that this document is Issued for"
                },
                "credit_rating_agency_name": {
                    "type": "string",
                    "description": "Unique identifier for the Credit Rating Agency"
                },
                "credit_rating_amount": {
                    "type": "integer",
                    "description": "Unique identifier of the CP Program that this document is associated with"
                },
                "credit_rating": {
                    "type": "string",
                    "description": "Rating assigned by the CRA"
                },
                "credit_rating_issuance_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Rating issuance date"
                },
                "credit_rating_effective_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Rating effective date, which can be different from the issuance date"
                },
                "credit_rating_expiry_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Rating expiry date"
                },
                "modified_by": {
                    "type": "string",
                    "description": "Unique identifier of the Logged-in User that performed the action. This is required for Audit History"
                },
                "last_modified": {
                    "type": "string",
                    "format": "date",
                    "description": "Last Modified Date for this CPIssue. This is required for Audit History"
                }
            }
        },
        "BoardResolutionBorrowingLimitDocument": {
            "type": "object",
            "properties": {
                "legal_entity_id": {
                    "type": "string",
                    "description": "Unique identifier of the Legal Entity that this document is issued by"
                },
                "board_resolution_borrowing_limit": {
                    "type": "integer",
                    "description": "Borrowing Limit approved by board"
                },
                "board_resolution_issuance_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date on which the BR was issued"
                },
                "board_resolution_expiry_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date on which the BR will become obsolete"
                },
                "modified_by": {
                    "type": "string",
                    "description": "Unique identifier of the Logged-in User that performed the action. This is required for Audit History"
                },
                "last_modified": {
                    "type": "string",
                    "format": "date",
                    "description": "Last Modified Date for this BR upload. This is required for Audit History"
                }
            }
        },
        "IndiaCPProgram": {
            "type": "object",
            "properties": {
                "program_id": {
                    "type": "string",
                    "description": "Unique identifier representing a specific CP Program raised by an Issuer"
                },
                "name": {
                    "type": "string",
                    "description": "Name of the CP Program"
                },
                "type": {
                    "type": "string",
                    "description": "Type of the CP Program"
                },
                "purpose": {
                    "type": "string",
                    "description": "Purpose of the CP Program"
                },
                "isin": {
                    "type": "string",
                    "description": "Unique CP Security Identifier No. In India this is issued by NSDL for Commercial Paper type of securities."
                },
                "issuer_id": {
                    "type": "string",
                    "description": "Unique identifier of the Issuer. This will also uniquely map to the DL Node of the Issuer"
                },
                "issuer_name": {
                    "type": "string",
                    "description": "Display name of the Issuer"
                },
                "issue_commencement_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date when the CP Program was initiated. India regulations mandate that a program should be fully allocated within 2 weeks of commencement."
                },
                "program_size": {
                    "type": "integer",
                    "description": "Total borrowing amount under this CP Program"
                },
                "program_allocated_value": {
                    "type": "number",
                    "format": "double",
                    "description": "Amount already allocated to the CP program"
                },
                "program_currency": {
                    "type": "string",
                    "description": "Currency of the issue of CP notes"
                },
                "maturity_days": {
                    "type": "integer",
                    "description": "No of days to maturity from the value date"
                },
                "ipa_id": {
                    "type": "string",
                    "description": "Unique identifier of the IPA. This will also uniquely map to the DL Node of the IPA"
                },
                "ipa_name": {
                    "type": "string",
                    "description": "Display name of the IPA"
                },
                "depository_id": {
                    "type": "string",
                    "description": "Unique identifier of the Depository (NSDL). This will also uniquely map to the DL Node of the Depository"
                },
                "depository_name": {
                    "type": "string",
                    "description": "Display name of the Depository"
                },
                "isin_generation_request_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the documents sent to the depository to generate ISIN"
                },
                "ipa_verification_request_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the documents sent to the IPA to certify the CP Program"
                },
                "ipa_certificate_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the IPA certificate issued by the IPA on verification of the CP Program and supporting Issuer documents"
                },
                "corporate_action_form_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the Corporate Action Form generated by the Issuer to allot CP"
                },
                "allotment_letter_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the Allotment Letter generated by IPA for CP transfer to Investor DP account"
                },
                "status": {
                    "type": "string",
                    "description": "Current status of the CP Program"
                },
                "version": {
                    "type": "integer",
                    "description": "Current version of the CP Program"
                },
                "modified_by": {
                    "type": "string",
                    "description": "Unique identifier of the Logged-in User that performed the action. This is required for Audit History"
                },
                "last_modified": {
                    "type": "string",
                    "format": "date",
                    "description": "Last Modified Date for this CPIssue. This is required for Audit History"
                }
            }
        },
        "IndiaCPIssue": {
            "type": "object",
            "properties": {
                "cp_program_id": {
                    "type": "string",
                    "description": "Unique identifier representing a specific CP Program raised by an Issuer. This CP Issue is allotted under this umbrella program"
                },
                "cp_trade_id": {
                    "type": "string",
                    "description": "Unique identifier representing a specific CP Issue under the umbrella CP Program"
                },
                "book_id": {
                    "type": "string",
                    "description": "Internal Book Id that this trade is booked under"
                },
                "isin": {
                    "type": "string",
                    "description": "Unique CP Security Identifier No. In India this is issued by NSDL for Commercial Paper type of securities."
                },
                "trader_id": {
                    "type": "string",
                    "description": "Unique identifier of the trader booking this trade"
                },
                "issuer_id": {
                    "type": "string",
                    "description": "Unique identifier of the Issuer"
                },
                "issuer_name": {
                    "type": "string",
                    "description": "Display name of the Issuer"
                },
                "beneficiary_id": {
                    "type": "string",
                    "description": "Unique identifier of the Investor. This also uniquely identifies the Investor DL Node"
                },
                "beneficiary_name": {
                    "type": "string",
                    "description": "Display name of the Investor"
                },
                "ipa_id": {
                    "type": "string",
                    "description": "Unique identifier of the IPA"
                },
                "ipa_name": {
                    "type": "string",
                    "description": "Display name of the IPA"
                },
                "depository_id": {
                    "type": "string",
                    "description": "Unique identifier of the Depository (NSDL)"
                },
                "depository_name": {
                    "type": "string",
                    "description": "Display name of the Depository"
                },
                "trade_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date on which the trade was captured"
                },
                "value_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Date on which the trade was settled and the Cash and CP securities were swapped between the Issuer and the Investor"
                },
                "maturity_days": {
                    "type": "integer",
                    "description": "Tenor of the CP maturity calculated from value date"
                },
                "currency": {
                    "type": "string",
                    "description": "Currency of the issued CP Notes"
                },
                "facevalue_per_unit": {
                    "type": "integer",
                    "description": "Face Value per Unit * No_Of_Units is the amount that will be paid by the Issuer to the Investor on redemption"
                },
                "no_of_units": {
                    "type": "integer",
                    "description": "No. of CP Units Issued"
                },
                "rate": {
                    "type": "number",
                    "format": "float",
                    "description": "Rate at which the yield is calculated"
                },
                "issuer_settlement_details": {
                    "$ref": "#/definitions/SettlementDetails"
                },
                "investor_settlement_details": {
                    "$ref": "#/definitions/SettlementDetails"
                },
                "ipa_settlement_details": {
                    "$ref": "#/definitions/SettlementDetails"
                },
                "deal_confirmation_doc_id": {
                    "type": "string",
                    "description": "Unique identifier of the deal confirmation document signed by both the Issuer and the Investor"
                },
                "status": {
                    "type": "string",
                    "description": "Current status of the CP Issue"
                },
                "version": {
                    "type": "integer",
                    "description": "Current version of the CP Issue"
                },
                "modified_by": {
                    "type": "string",
                    "description": "Unique identifier of the Logged-in User that performed the action. This is required for Audit History"
                },
                "last_modified": {
                    "type": "string",
                    "format": "date",
                    "description": "Last Modified Date for this CPIssue. This is required for Audit History"
                }
            }
        },
        "IndiaCPDocumentDetails": {
            "type": "object",
            "properties": {
                "cp_program_id": {
                    "type": "string",
                    "description": "Unique identifier of the CP Program that this document is associated with"
                },
                "cp_issue_id": {
                    "type": "string",
                    "description": "Unique identifier of the CP Issue that this document is associated with"
                },
                "doc_type": {
                    "type": "string",
                    "description": "Type of Legal Documents exchanged and signed/countersigned by participants in the CPProgram",
                    "enum": [
                        "CREDIT_RATING_DOC",
                        "BOARD_RESOLUTION_BORROWING_LIMIT_DOC",
                        "DEPOSITORY_DOCS",
                        "IPA_DOCS",
                        "IPA_CERTIFICATE_DOC",
                        "CORPORATE_ACTION_FORM",
                        "DEAL_CONFIRMATION_DOC"
                    ]
                },
                "doc_sub_type": {
                    "type": "string",
                    "description": "Sub-Type of the Document. May or may not be applicable. For e.g. for IPA_DOC is a collection of documents that need to be sent to the IPA - like FIMMDA.pdf and others."
                },
                "doc_extension": {
                    "type": "string",
                    "description": "File extension of the document. E.g. PDF. The doc_sub_type.doc_extension would be the full file name in the zipped file uploaded to the DL."
                },
                "doc_hash": {
                    "type": "string",
                    "description": "SHA256 Hash of the Content of the Document. This hash uniquely identifies the document."
                },
                "doc_status": {
                    "type": "string",
                    "description": "The current status of the document. Possible values are UNSIGNED, SIGNED_BY_ISSUER, SIGNED_BY_INVESTOR, SIGNED_BY_IPA, SIGNED_BY_NSDL"
                },
                "modified_by": {
                    "type": "string",
                    "description": "Unique identifier of the Logged-in User that performed the action. This is required for Audit History"
                },
                "last_modified": {
                    "type": "string",
                    "format": "date",
                    "description": "Last Modified Date for this CPIssue. This is required for Audit History"
                }
            }
        },
        "SettlementDetails": {
            "type": "object",
            "properties": {
                "partyType": {
                    "type": "string",
                    "description": "partyType",
                    "enum": [
                        "ISSUER",
                        "INVESTOR",
                        "IPA"
                    ]
                },
                "paymentAccountDetails": {
                    "$ref": "#/definitions/PaymentAccountDetails"
                },
                "depositoryAccountDetails": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/DepositoryAccountDetails"
                    }
                }
            }
        },
        "PaymentAccountDetails": {
            "type": "object",
            "properties": {
                "creditor_name": {
                    "type": "string",
                    "description": "Name in which the payment has to be made. For e.g. Barclays Investments & Loans (India) Ltd CP"
                },
                "bank_account_no": {
                    "type": "string",
                    "description": "Bank account no. at the IPA Bank"
                },
                "bank_account_type": {
                    "type": "string",
                    "description": "Bank account type. For e.g. current account"
                },
                "bank_name": {
                    "type": "string",
                    "description": "Name of the IPA Bank"
                },
                "rtgs_ifsc_code": {
                    "type": "string",
                    "description": "RTGS IFSC code of the IPA Bank to receive payments"
                }
            }
        },
        "DepositoryAccountDetails": {
            "type": "object",
            "properties": {
                "dp_id": {
                    "type": "string",
                    "description": "Unique identifier of the DP Account at the Depository"
                },
                "dp_name": {
                    "type": "string",
                    "description": "Name under which the DP Account is registered. For e.g. Barclays Securities India Pvt Ltd"
                },
                "dp_type": {
                    "type": "string",
                    "description": "Depository Account Type. For now only the IPA has two depository accounts one for Allotment and one for Redemption",
                    "enum": [
                        "ALLOTTMENT",
                        "REDEMPTION"
                    ]
                },
                "client_id": {
                    "type": "string",
                    "description": "Unique identifier of the Client at the Depository"
                }
            }
        },
        "Error": {
            "type": "object",
            "properties": {
                "code": {
                    "type": "integer",
                    "format": "int32"
                },
                "message": {
                    "type": "string"
                },
                "fields": {
                    "type": "string"
                }
            }
        }
    }
}